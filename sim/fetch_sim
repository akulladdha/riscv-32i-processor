#! /opt/local/bin/vvp
:ivl_version "13.0 (devel)" "(s20250103)";
:ivl_delay_selection "TYPICAL";
:vpi_time_precision - 12;
:vpi_module "/opt/local/lib/ivl/system.vpi";
:vpi_module "/opt/local/lib/ivl/vhdl_sys.vpi";
:vpi_module "/opt/local/lib/ivl/vhdl_textio.vpi";
:vpi_module "/opt/local/lib/ivl/v2005_math.vpi";
:vpi_module "/opt/local/lib/ivl/va_math.vpi";
S_0x147606570 .scope module, "fetch_stage_tb" "fetch_stage_tb" 2 3;
 .timescale -9 -12;
v0x1476172e0_0 .var "clk", 0 0;
v0x147617380_0 .net "current_instruction", 31 0, L_0x1476178d0;  1 drivers
v0x147617430_0 .net "current_pc", 31 0, v0x147617130_0;  1 drivers
v0x147617520_0 .var "rst", 0 0;
S_0x1476066e0 .scope module, "my_imem" "instruction_mem" 2 15, 3 1 0, S_0x147606570;
 .timescale 0 0;
    .port_info 0 /INPUT 32 "addr";
    .port_info 1 /OUTPUT 32 "instruction";
L_0x1476178d0 .functor BUFZ 32, L_0x1476175b0, C4<00000000000000000000000000000000>, C4<00000000000000000000000000000000>, C4<00000000000000000000000000000000>;
v0x1476068e0_0 .net *"_ivl_0", 31 0, L_0x1476175b0;  1 drivers
v0x1476169a0_0 .net *"_ivl_2", 31 0, L_0x147617770;  1 drivers
v0x147616a40_0 .net *"_ivl_4", 29 0, L_0x147617690;  1 drivers
L_0x128040010 .functor BUFT 1, C4<00>, C4<0>, C4<0>, C4<0>;
v0x147616af0_0 .net *"_ivl_6", 1 0, L_0x128040010;  1 drivers
v0x147616ba0_0 .net "addr", 31 0, v0x147617130_0;  alias, 1 drivers
v0x147616c90_0 .net "instruction", 31 0, L_0x1476178d0;  alias, 1 drivers
v0x147616d40 .array "memory", 1023 0, 31 0;
L_0x1476175b0 .array/port v0x147616d40, L_0x147617770;
L_0x147617690 .part v0x147617130_0, 2, 30;
L_0x147617770 .concat [ 30 2 0 0], L_0x147617690, L_0x128040010;
S_0x147616e10 .scope module, "my_pc" "pc" 2 9, 4 1 0, S_0x147606570;
 .timescale 0 0;
    .port_info 0 /INPUT 1 "clk";
    .port_info 1 /INPUT 1 "reset";
    .port_info 2 /OUTPUT 32 "pc_out";
v0x147617080_0 .net "clk", 0 0, v0x1476172e0_0;  1 drivers
v0x147617130_0 .var "pc_out", 31 0;
v0x1476171f0_0 .net "reset", 0 0, v0x147617520_0;  1 drivers
E_0x147617030 .event posedge, v0x147617080_0;
    .scope S_0x147616e10;
T_0 ;
    %wait E_0x147617030;
    %load/vec4 v0x1476171f0_0;
    %flag_set/vec4 8;
    %jmp/0xz  T_0.0, 8;
    %pushi/vec4 0, 0, 32;
    %assign/vec4 v0x147617130_0, 0;
    %jmp T_0.1;
T_0.0 ;
    %load/vec4 v0x147617130_0;
    %addi 4, 0, 32;
    %assign/vec4 v0x147617130_0, 0;
T_0.1 ;
    %jmp T_0;
    .thread T_0;
    .scope S_0x1476066e0;
T_1 ;
    %vpi_call 3 9 "$readmemh", "sample_program.hex", v0x147616d40 {0 0 0};
    %end;
    .thread T_1;
    .scope S_0x147606570;
T_2 ;
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x1476172e0_0, 0, 1;
T_2.0 ;
    %delay 5000, 0;
    %load/vec4 v0x1476172e0_0;
    %inv;
    %store/vec4 v0x1476172e0_0, 0, 1;
    %jmp T_2.0;
T_2.1 ;
    %end;
    .thread T_2;
    .scope S_0x147606570;
T_3 ;
    %vpi_call 2 26 "$dumpfile", "fetch_test.vcd" {0 0 0};
    %vpi_call 2 27 "$dumpvars", 32'sb00000000000000000000000000000000, S_0x147606570 {0 0 0};
    %pushi/vec4 1, 0, 1;
    %store/vec4 v0x147617520_0, 0, 1;
    %delay 10000, 0;
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x147617520_0, 0, 1;
    %delay 40000, 0;
    %vpi_call 2 34 "$finish" {0 0 0};
    %end;
    .thread T_3;
# The file index is used to find the file name in the following table.
:file_names 5;
    "N/A";
    "<interactive>";
    "test/fetch_stage_tb.v";
    "src/instruction_mem.v";
    "src/pc.v";
